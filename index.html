<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>Meeting Timer</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#f8f7f5">
<link rel="icon" href="./img/favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;700;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg-top:#f8f7f5; --bg-bot:#f3f2ef; --ink:#2b3432; --muted:#8b827a;
  --card:rgba(255,255,252,.98); --border:rgba(40,30,20,.10);
  --green:#3fa77a; --pause:#87b9ff; --stop:#ffb766; --press:#cfc7bd; --pill:#fffefb; --radius:16px;
  --tl-green-1:#e9f3ec; --tl-green-2:#deefe4; --phase-intro:#87b9ff;
  --phase-review:#ffb766; --phase-outro:#87b9ff;
  --content-max:560px;
}

/* S√∏rg for at b√•de WT og SP holder seg p√• samme bredde hele tiden */
#viewWT .h1, #viewWT .message, #viewWT .controls,
#viewSP .big-clock, #viewSP .message, #viewSP .controls,
#viewSP .card, #viewSP .timeline-wrap {
  max-width: var(--content-max);
  margin-inline: auto;
}

/* Timeline elapsed-linje skal alltid vokse fra venstre til h√∏yre, ogs√• i nedtelling */
#elapsedSP { transform-origin: left center; }
</style>
</head>
<body>
<div class="container">
  <div class="topbar">
    <div class="brand" id="brandBox">
      <div class="burst"></div>
      <img id="logoImg" src="./img/meeting-timer-logo.png" alt="Meeting Timer logo">
    </div>
    <div class="segmented" role="tablist" aria-label="Modus">
      <button id="tabWT" class="active" role="tab" aria-selected="true" title="Vaktt√•rn">
        <img src="./img/watchtower-icon.png" alt="">
      </button>
      <button id="tabSP" role="tab" aria-selected="false" title="Taler">
        <img id="otherIcon" src="./img/other-icon.png" alt="">
      </button>
    </div>
  </div>

  <!-- TALER -->
  <div id="viewSP" class="view">
    <div class="card" id="spCard">
      <div style="font-weight:1000;color:#4a5552;margin:2px 0 8px">TIMER FOR MIDTUKEM√òTET</div>
      <div id="spInputs" style="margin-bottom:6px">
        <div class="preset-row">
          <button class="preset" data-sec="0">0</button>
          <button class="preset" data-sec="300">5</button>
          <button class="preset" data-sec="600">10</button>
          <button class="preset" data-sec="900">15</button>
          <button class="preset" data-sec="1800">30</button>
        </div>
      </div>
      <div class="timeline-wrap">
        <div id="timelineSP" class="timeline">
          <div id="elapsedSP" class="elapsed"></div>
          <div id="cursorSP" class="cursor"></div>
        </div>
      </div>
      <div class="big-clock" id="clockSP">00:00</div>
      <div class="message" id="msgSP">Start stoppeklokken eller velg en tid og start nedtelling.</div>
      <div class="controls">
        <button id="playSP" class="round play">‚ñ∂</button>
        <button id="pauseSP" class="round pause" disabled>‚ùö‚ùö</button>
        <button id="stopSP" class="round stop" disabled>‚ñ†</button>
      </div>
    </div>
  </div>

  <!-- VAKTT√ÖRN -->
  <div id="viewWT" class="view active">
    <div id="wtControlsCard" class="card infoband" style="justify-content:space-between;gap:12px">
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <select id="weekSel" class="select" aria-label="Artikkel"><option>Laster ‚Ä¶</option></select>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <div class="pill" id="pillParas">Avsnitt: 0</div>
        <div class="pill" id="pillReads">üìñ Les-skriftsteder: 0</div>
      </div>
    </div>
    <div class="h1" id="articleTitle">‚Äî</div>
    <div class="message" id="message">Velg artikkel for √• laste timer.</div>
    <div class="timeline-wrap">
      <div id="timeline" class="timeline">
        <div id="introSlot" class="slot"></div>
        <div id="reviewSlot" class="slot"></div>
        <div id="outroSlot" class="slot"></div>
        <div id="elapsed" class="elapsed"></div>
        <div id="cursor" class="cursor"></div>
      </div>
      <div class="clock" id="clockWT">00:00</div>
    </div>
    <div class="controls">
      <button id="playWT" class="round play">‚ñ∂</button>
      <button id="pauseWT" class="round pause" disabled>‚ùö‚ùö</button>
      <button id="stopWT" class="round stop" disabled>‚ñ†</button>
    </div>
    <div class="card" style="margin-top:14px">
      <textarea id="wtNotes" rows="5" style="width:100%;border:1px solid var(--border);border-radius:12px;padding:10px;font:inherit;color:var(--ink);background:var(--pill)" placeholder="Her kan du notere."></textarea>
    </div>
  </div>

  <div class="footer">Meeting Timer ¬© 2025</div>
</div>

<script>
// Juster slik at SP-tidslinjen alltid fylles fra venstre til h√∏yre, ogs√• ved nedtelling
function updateSPProgress(elapsed,total){
  const e=elapsed, T=total;
  let p;
  if(T>0){
    // beregn fremdrift som brukt tid / total tid
    p=Math.min(e/T,1);
  } else {
    // hvis opp-telling
    p=Math.min(e/1800,1);
  }
  document.getElementById('elapsedSP').style.width=(p*100)+'%';
}

const otherIcon=document.getElementById('otherIcon');
otherIcon.addEventListener('error',()=>{ otherIcon.src='./img/other-icon.ng' });
</script>
</body>
</html>
