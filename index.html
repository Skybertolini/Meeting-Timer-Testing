<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>Meeting Timer (√ân side)</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#f8f7f5">
<link rel="icon" href="./img/favicon.png?v=2">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;700;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f8f7f5; --ink:#2b3432; --muted:#8b827a;
  --card:#fff; --border:rgba(40,30,20,.10);
  --green:#6ecf9e; 
  --phase-intro:#87b9ff; 
  --phase-review:#ffb766; 
  --phase-outro:#87b9ff;
  --press:#cfc7bd; --pill:#fffefb; --radius:16px;
  --tl-green-1:#e9f3ec; --tl-green-2:#deefe4;
  --content-max:640px;
}
*{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
html,body{margin:0;color:var(--ink);background:var(--bg) url('./img/paper-texture.png') repeat; background-size:400px 400px; font-family:"Nunito",ui-rounded,-apple-system,BlinkMacSystemFont,"SF Pro Text","SF Pro Display",Segoe UI,Roboto,Helvetica,Arial,sans-serif;letter-spacing:.01em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;height:100%}
body{display:flex;flex-direction:column;min-height:100%}
.container{flex:1 0 auto;max-width:980px;margin:0 auto;padding:16px 16px 28px;min-width:320px}
.footer{flex:0 0 auto;text-align:center;color:var(--muted);font-size:.9rem;padding:10px 0 14px}

.topbar{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:8px 0 18px;min-height:72px}
.brand{display:flex;align-items:center;gap:12px;position:relative}
.brand img{height:160px;width:auto;cursor:pointer;user-select:none;-webkit-user-drag:none;filter:drop-shadow(0 8px 24px rgba(70,50,30,.08));transition:transform .25s,filter .25s}
@media (min-width:768px){ .brand img{height:200px} }

@keyframes spin2s{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}
.logo-spin{animation:spin2s 2s linear}
.logo-shake{animation:shake .4s ease-in-out}

.card{background:var(--card) url('./img/paper-texture.png') repeat; background-size:400px 400px; border:1px solid var(--border);border-radius:var(--radius);box-shadow:0 12px 40px rgba(70,50,30,.06);padding:14px}

.h1{font-size:1.38rem;font-weight:900;margin:18px auto 10px;max-width:var(--content-max);text-transform:uppercase}
.message{background:var(--pill);border:2px solid var(--border);border-radius:12px;padding:20px 22px;min-height:56px;box-shadow:0 8px 24px rgba(70,50,30,.05);margin:0 auto 20px;max-width:var(--content-max);color:#4a5552;font-size:1.62rem;line-height:1.3;display:flex;align-items:center}

.timeline-wrap{margin-top:22px; margin-bottom:40px; max-width:var(--content-max); margin-inline:auto; position:relative}
.timeline{position:relative;height:56px;border-radius:14px;overflow:visible;background:linear-gradient(180deg,var(--tl-green-1) 0%,#edf5f0 100%);border:1px solid var(--border);}
.slot{position:absolute;top:0;height:100%;opacity:.22}
#introSlot{background:var(--phase-intro)}
#reviewSlot{background:var(--phase-review)}
#outroSlot{background:var(--phase-outro)}
.para-slot{position:absolute;top:0;height:100%;display:flex;align-items:center;justify-content:center;border-left:1px solid rgba(50,35,25,.06);border-right:1px solid rgba(255,255,255,.55);font-weight:900;color:#2f3b34;text-shadow:0 1px 0 rgba(255,255,255,.55);cursor:pointer;box-sizing:border-box;min-width:14px;background:var(--tl-green-1)}
.para-slot.alt{background:var(--tl-green-2)}
.para-slot>div{pointer-events:none;white-space:nowrap;overflow:hidden;line-height:1}
.read-pin{position:absolute; left:50%; transform:translateX(-50%); bottom:-24px; width:18px; height:18px; background:url('./img/read-icon.png') center/contain no-repeat; pointer-events:none; opacity:0.95}
.elapsed{position:absolute;top:0;left:0;height:100%;background:rgba(58,111,82,.22);width:0%;transition:width .25s linear;z-index:2;pointer-events:none}
.cursor{position:absolute;top:-10px;width:2px;height:76px;background:#2f5f49;left:0%;z-index:3}
.target-label{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:900;color:#2f3b34;opacity:.9;pointer-events:none;z-index:4}

.big-clock,.clock{margin-top:16px;font-size:2.2rem;font-weight:900;color:#2f5f49;max-width:var(--content-max);margin-inline:auto}
#clockWT{font-size:2.75rem; margin-top:40px}
#clockSP{font-size:2.75rem; margin-top:40px}

.controls{display:flex;gap:12px;margin-top:12px;max-width:var(--content-max);margin-inline:auto;justify-content:flex-start}
.round{width:58px;height:58px;border-radius:999px;border:0;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem;box-shadow:0 10px 24px rgba(70,50,30,.08)}
.play{background:var(--green)}
.pause{background:var(--phase-intro); color:#ffffff}
.stop{background:var(--phase-review); color:#2b2a29}

.preset-row{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-bottom:18px}
.preset{border:1px solid var(--border);background:var(--pill);border-radius:999px;padding:10px 14px;font-weight:900;cursor:pointer;box-shadow:0 8px 20px rgba(70,50,30,.06);color:#2f5f49;font-size:1.05rem}
.preset.active{background:#2f5f49;color:#fff}

#timerSection{margin-top:60px}
#timerSection .h1{margin-bottom:22px}
#timerSection .timeline-wrap{margin-top:20px}
#timerSection .controls{margin-top:30px}

img{-webkit-user-drag:none;user-select:none;-webkit-touch-callout:none}
/* keep article select neat + constrain WT card */
#wtControlsCard{max-width:var(--content-max);margin-inline:auto}
.select{appearance:none;border:1px solid var(--border);border-radius:12px;padding:10px 12px;background:var(--pill);font-weight:900;color:var(--ink);box-shadow:0 4px 14px rgba(70,50,30,.05);min-width:180px;max-width:100%}
</style>
</head>
<body>
<div class="container">
  <div class="topbar">
    <div class="brand" id="brandBox">
      <img id="logoImg" src="./img/meeting-timer-logo.png" alt="Meeting Timer logo">
    </div>
  </div>

  <!-- VAKTT√ÖRN -->
  <div id="wtControlsCard" class="card" style="max-width:var(--content-max);margin-inline:auto">
    <div style="display:flex;flex-direction:column;gap:10px;align-items:stretch">
      <select id="weekSel" class="select" aria-label="Artikkel"><option>Laster ‚Ä¶</option></select>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <div class="pill" id="pillParas">Avsnitt: 0</div>
        <div class="pill" id="pillReads">üìñ Les-skriftsteder: 0</div>
      </div>
    </div>
  </div>
  <div class="h1" id="articleTitle">‚Äî</div>
  <div class="message" id="message">Velg artikkel for √• laste timer.</div>
  <div class="timeline-wrap">
    <div id="timeline" class="timeline">
      <div id="introSlot" class="slot"></div>
      <div id="reviewSlot" class="slot"></div>
      <div id="outroSlot" class="slot"></div>
      <div id="elapsed" class="elapsed"></div>
      <div id="cursor" class="cursor"></div>
    </div>
    <div class="clock" id="clockWT">00:00</div>
  </div>
  <div class="controls">
    <button id="playWT" class="round play">‚ñ∂</button>
    <button id="pauseWT" class="round pause" disabled>‚ùö‚ùö</button>
    <button id="stopWT" class="round stop" disabled>‚ñ†</button>
  </div>
  <div class="card" style="margin-top:14px;max-width:var(--content-max);margin-inline:auto">
    <textarea id="wtNotes" rows="3" style="width:100%;border:1px solid var(--border);border-radius:12px;padding:10px;font:inherit;color:#2b3432;background:var(--pill);font-size:90%" placeholder="Her kan du notere."></textarea>
  </div>

  <!-- TIMER -->
  <section id="timerSection">
    <div class="card" style="max-width:var(--content-max);margin-inline:auto">
      <div class="h1">TIMER FOR MIDTUKEM√òTET</div>
      <div id="spInputs">
        <div class="preset-row">
          <button class="preset" data-sec="0">0</button>
          <button class="preset" data-sec="300">5</button>
          <button class="preset active" data-sec="600">10</button>
          <button class="preset" data-sec="900">15</button>
          <button class="preset" data-sec="1200">20</button>
          <button class="preset" data-sec="1800">30</button>
        </div>
      </div>
      <div class="timeline-wrap">
        <div id="timelineSP" class="timeline">
          <div id="elapsedSP" class="elapsed"></div>
          <div id="cursorSP" class="cursor"></div>
          <div id="targetLabelSP" class="target-label" style="display:none">‚Äî</div>
        </div>
      </div>
      <div class="big-clock" id="clockSP">00:00</div>
      <img id="msImg" class="milestone-img show" alt="Milestone" src="./img/pick-milestone.png"/>
      <div class="controls">
        <button id="playSP" class="round play"><span id="playSPIcon">‚ñ∂</span></button>
        <button id="pauseSP" class="round pause" disabled>‚ùö‚ùö</button>
        <button id="stopSP" class="round stop" disabled>‚ñ†</button>
      </div>
    </div>
  </section>

  <div class="footer">Meeting Timer ¬© 2025</div>
</div>

<script>
// Logo animasjon
(function(){ const logo=document.getElementById('logoImg'); if(!logo) return; logo.addEventListener('click',()=>{ logo.classList.remove('logo-spin','logo-shake'); void logo.offsetWidth; logo.classList.add('logo-spin'); setTimeout(()=>{ logo.classList.remove('logo-spin'); logo.classList.add('logo-shake'); setTimeout(()=>logo.classList.remove('logo-shake'),450); },2000); });})();

// Milestone-logikk
const PRESET_KEY='meetingTimer.annetSeconds';
const presetButtons=document.querySelectorAll('#spInputs .preset');
const msImg=document.getElementById('msImg');
const milestoneMap={
  0:null,
  300:'./img/milestone-5.png',
  600:'./img/milestone-10.png',
  900:'./img/milestone-15.png',
  1200:'./img/milestone-20.png',
  1800:'./img/milestone-30.png'
};
let SP_TOTAL=300; // standard 10 min
localStorage.setItem(PRESET_KEY,SP_TOTAL);

function markPreset(s){ presetButtons.forEach(b=>b.classList.toggle('active',parseInt(b.dataset.sec,10)===s)) }
function updateMilestonePreview(){
  if(!SP_TOTAL||!milestoneMap[SP_TOTAL]){msImg.src='./img/pick-milestone.png';return}
  msImg.src='./img/pick-milestone.png';
}

presetButtons.forEach(btn=>btn.addEventListener('click',()=>{
  if(btn.dataset.sec){
    SP_TOTAL=parseInt(btn.dataset.sec,10);
    localStorage.setItem(PRESET_KEY,SP_TOTAL);
    markPreset(SP_TOTAL);
    updateMilestonePreview();
  }
}));

// Init
markPreset(SP_TOTAL);
updateMilestonePreview();

// N√•r man trykker play: bytt bilde til riktig milestone
const playSP=document.getElementById('playSP');
const pauseSP=document.getElementById('pauseSP');
const stopSP=document.getElementById('stopSP');
playSP.addEventListener('click',()=>{
  if(milestoneMap[SP_TOTAL]) msImg.src=milestoneMap[SP_TOTAL];
});

pauseSP.addEventListener('click',()=>{
  // behold bilde
});

stopSP.addEventListener('click',()=>{
  msImg.src='./img/milestone-stop.png';
  setTimeout(()=>{ msImg.src='./img/pick-milestone.png'; },10000);
});
// Preset & milestone behavior (simple)
(function(){
  const presetButtons=[...document.querySelectorAll('#spInputs .preset')];
  let selected=600; // default 10 min
  const msImg=document.getElementById('msImg');
  const mapImage=(sec)=>{
    if(sec===0) return './img/milestone-countup.png';
    if(sec===1800) return './img/milestone-30.png';
    if(sec===900) return './img/milestone-15.png';
    if(sec===600) return './img/milestone-10.png';
    if(sec===300) return './img/milestone-5.png';
    return './img/milestone-other.png';
  };
  // init: ensure only 10 is active
  presetButtons.forEach(btn=>{ if(parseInt(btn.dataset.sec,10)===600) btn.classList.add('active'); else btn.classList.remove('active'); });
  presetButtons.forEach(btn=>{
    btn.addEventListener('click',()=>{
      presetButtons.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      selected=parseInt(btn.dataset.sec,10)||0;
      // keep pick visual until Play is pressed
      if(msImg) msImg.src='./img/pick-milestone.png';
    });
  });
  // Controls
  const play=document.getElementById('playSP');
  const pause=document.getElementById('pauseSP');
  const stop=document.getElementById('stopSP');
  if(play){ play.addEventListener('click',()=>{ if(msImg) msImg.src = mapImage(selected); }); }); }
  if(pause){ pause.addEventListener('click',()=>{ /* image unchanged on pause */ }); }
  if(stop){ stop.addEventListener('click',()=>{ if(!msImg) return; const back='./img/pick-milestone.png'; const done='./img/milestone-stop.png'; msImg.src=done; setTimeout(()=>{ msImg.src=back; }, 10000); }); }
})();
</script>
</body>
</html>
